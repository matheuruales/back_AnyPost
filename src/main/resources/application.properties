spring.config.import=optional:file:.env[.properties]

# Bind to the port provided by Railway/Render/etc. (defaults to 8080 locally)
server.port=8080

# Database (defaults to in-memory H2 when no external variables are provided)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres.railway.internal:5432/railway}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}


# Connection pool settings for reliability (HikariCP)
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-test-query=SELECT 1

# JPA / Hibernate settings
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# External webhook configuration
n8n.webhook.url=${N8N_WEBHOOK_URL:http://18.191.161.60:5678/webhook/anypost/publish}

# Blotato video generation
blotato.api.key=${BLOTATO_API_KEY}
blotato.api.base-url=${BLOTATO_API_BASE_URL}
blotato.api.template-id=${BLOTATO_API_TEMPLATE_ID}

# Azure Blob Storage
azure.blob.connection-string=${AZURE_BLOB_CONNECTION_STRING:}
azure.blob.container-name=${AZURE_BLOB_CONTAINER_NAME:uploads}
azure.blob.public=${AZURE_BLOB_PUBLIC:true}

# OpenAI image generation
openai.api.key=${OPENAI_API_KEY:}
openai.api.base-url=${OPENAI_API_BASE_URL:https://api.openai.com/v1}
openai.images.model=${OPENAI_IMAGES_MODEL:dall-e-3}

# JWT Security
application.security.jwt.secret=${APPLICATION_SECURITY_JWT_SECRET:}
application.security.jwt.expiration=${APPLICATION_SECURITY_JWT_EXPIRATION:3600000}

# Logging (set to DEBUG for security troubleshooting; adjust as needed)
logging.level.org.springframework.security=INFO
logging.file.name=

# Mail (Google SMTP)
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Password reset
app.password-reset.expiration-minutes=15
app.cors.allowed-origins=*
app.cors.allow-credentials=false




spring.servlet.multipart.max-request-size=${SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE:500MB}
spring.servlet.multipart.max-file-size=${SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE:500MB}

